<div id="chat-history" class="space-y-4">
  <% if grouped_chats[:today].any? %>
    <div>
      <div class="px-2 py-1 text-xs text-gray-500 font-medium">Today</div>
      <% grouped_chats[:today].each do |chat| %>
        <div class="chat-item group relative">
          <a href="/chat/<%= chat[:id] %>" 
             class="flex items-center justify-between px-2 py-2 text-sm rounded-md hover:bg-gray-100 transition-colors"
             hx-get="/chat/<%= chat[:id] %>" 
             hx-target="body" 
             hx-push-url="true">
            <span class="truncate flex-1"><%= chat[:title] %></span>
          </a>
          <button class="absolute right-2 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 transition-opacity"
                  hx-delete="/chat/<%= chat[:id] %>"
                  hx-target="#chat-history"
                  hx-confirm="Are you sure you want to delete this chat?"
                  title="Delete chat">
            ×
          </button>
        </div>
      <% end %>
    </div>
  <% end %>

  <% if grouped_chats[:yesterday].any? %>
    <div>
      <div class="px-2 py-1 text-xs text-gray-500 font-medium">Yesterday</div>
      <% grouped_chats[:yesterday].each do |chat| %>
        <div class="chat-item group relative">
          <a href="/chat/<%= chat[:id] %>" 
             class="flex items-center justify-between px-2 py-2 text-sm rounded-md hover:bg-gray-100 transition-colors"
             hx-get="/chat/<%= chat[:id] %>" 
             hx-target="body" 
             hx-push-url="true">
            <span class="truncate flex-1"><%= chat[:title] %></span>
          </a>
          <button class="absolute right-2 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 transition-opacity"
                  hx-delete="/chat/<%= chat[:id] %>"
                  hx-target="#chat-history"
                  hx-confirm="Are you sure you want to delete this chat?"
                  title="Delete chat">
            ×
          </button>
        </div>
      <% end %>
    </div>
  <% end %>

  <% if grouped_chats[:last_week].any? %>
    <div>
      <div class="px-2 py-1 text-xs text-gray-500 font-medium">Last 7 days</div>
      <% grouped_chats[:last_week].each do |chat| %>
        <div class="chat-item group relative">
          <a href="/chat/<%= chat[:id] %>" 
             class="flex items-center justify-between px-2 py-2 text-sm rounded-md hover:bg-gray-100 transition-colors"
             hx-get="/chat/<%= chat[:id] %>" 
             hx-target="body" 
             hx-push-url="true">
            <span class="truncate flex-1"><%= chat[:title] %></span>
          </a>
          <button class="absolute right-2 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 transition-opacity"
                  hx-delete="/chat/<%= chat[:id] %>"
                  hx-target="#chat-history"
                  hx-confirm="Are you sure you want to delete this chat?"
                  title="Delete chat">
            ×
          </button>
        </div>
      <% end %>
    </div>
  <% end %>

  <% if grouped_chats[:last_month].any? %>
    <div>
      <div class="px-2 py-1 text-xs text-gray-500 font-medium">Last 30 days</div>
      <% grouped_chats[:last_month].each do |chat| %>
        <div class="chat-item group relative">
          <a href="/chat/<%= chat[:id] %>" 
             class="flex items-center justify-between px-2 py-2 text-sm rounded-md hover:bg-gray-100 transition-colors"
             hx-get="/chat/<%= chat[:id] %>" 
             hx-target="body" 
             hx-push-url="true">
            <span class="truncate flex-1"><%= chat[:title] %></span>
          </a>
          <button class="absolute right-2 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 transition-opacity"
                  hx-delete="/chat/<%= chat[:id] %>"
                  hx-target="#chat-history"
                  hx-confirm="Are you sure you want to delete this chat?"
                  title="Delete chat">
            ×
          </button>
        </div>
      <% end %>
    </div>
  <% end %>

  <% if grouped_chats[:older].any? %>
    <div>
      <div class="px-2 py-1 text-xs text-gray-500 font-medium">Older than last month</div>
      <% grouped_chats[:older].each do |chat| %>
        <div class="chat-item group relative">
          <a href="/chat/<%= chat[:id] %>" 
             class="flex items-center justify-between px-2 py-2 text-sm rounded-md hover:bg-gray-100 transition-colors"
             hx-get="/chat/<%= chat[:id] %>" 
             hx-target="body" 
             hx-push-url="true">
            <span class="truncate flex-1"><%= chat[:title] %></span>
          </a>
          <button class="absolute right-2 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 transition-opacity"
                  hx-delete="/chat/<%= chat[:id] %>"
                  hx-target="#chat-history"
                  hx-confirm="Are you sure you want to delete this chat?"
                  title="Delete chat">
            ×
          </button>
        </div>
      <% end %>
    </div>
  <% end %>

  <% if grouped_chats.values.all?(&:empty?) %>
    <div class="px-2 text-gray-500 text-center text-sm">
      Your conversations will appear here once you start chatting!
    </div>
  <% end %>
</div>
